(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3259:function(e,s,t){Promise.resolve().then(t.bind(t,474))},474:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var a=t(7920),r=t(9449),i=t(6685),l=t(1335),d=t(8059),c=t.n(d);function n(){var e;let{data:s,status:t}=(0,r.useSession)(),d=(0,i.useRouter)(),[n,o]=(0,l.useState)(null),[x,m]=(0,l.useState)([]),[h,g]=(0,l.useState)([]),[u,b]=(0,l.useState)(!0);(0,l.useEffect)(()=>{"unauthenticated"===t&&d.push("/auth/signin")},[t,d]),(0,l.useEffect)(()=>{s&&j()},[s]);let j=async()=>{try{let[e,s,t]=await Promise.all([fetch("/api/stats"),fetch("/api/moods"),fetch("/api/predictions")]);if(e.ok){let s=await e.json();o(s)}if(s.ok){let e=await s.json();m(e.slice(0,5))}if(t.ok){let e=await t.json();g(e.slice(0,5))}}catch(e){console.error("Error fetching dashboard data:",e)}finally{b(!1)}},N=async()=>{await (0,r.signOut)({callbackUrl:"/"})};return"loading"===t||u?(0,a.jsx)("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-xl",children:"Loading..."})}):s?(0,a.jsx)("div",{className:"min-h-screen bg-black text-white",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:["Welcome back, ",null===(e=s.user)||void 0===e?void 0:e.name,"!"]}),(0,a.jsx)("p",{className:"text-gray-400",children:"Here's your trading psychology overview"})]}),(0,a.jsx)("button",{onClick:N,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Logout"})]}),n&&(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"bg-gray-900 p-4 rounded-lg border border-gray-800",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:n.totalMoods}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Mood Entries"})]}),(0,a.jsxs)("div",{className:"bg-gray-900 p-4 rounded-lg border border-gray-800",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-pink-400",children:n.totalPredictions}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Predictions"})]}),(0,a.jsxs)("div",{className:"bg-gray-900 p-4 rounded-lg border border-gray-800",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:[n.accuracyScore,"%"]}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Accuracy"})]}),(0,a.jsxs)("div",{className:"bg-gray-900 p-4 rounded-lg border border-gray-800",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:n.streakDays}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Day Streak"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)(c(),{href:"/mood",className:"bg-purple-600 hover:bg-purple-700 p-6 rounded-lg transition-colors block",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Log Today's Mood"}),(0,a.jsx)("p",{className:"text-purple-200",children:"Track your emotional state and market sentiment"})]}),(0,a.jsxs)(c(),{href:"/predictions",className:"bg-pink-600 hover:bg-pink-700 p-6 rounded-lg transition-colors block",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Make a Prediction"}),(0,a.jsx)("p",{className:"text-pink-200",children:"Share your market insights and track accuracy"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-900 p-6 rounded-lg border border-gray-800",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Recent Moods"}),x.length>0?(0,a.jsx)("div",{className:"space-y-3",children:x.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:["Mood: ",e.moodScore,"/10"]}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:[e.emotions.join(", ")," • ",e.marketCondition]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]},e._id))}):(0,a.jsx)("p",{className:"text-gray-400",children:"No mood entries yet"})]}),(0,a.jsxs)("div",{className:"bg-gray-900 p-6 rounded-lg border border-gray-800",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Recent Predictions"}),h.length>0?(0,a.jsx)("div",{className:"space-y-3",children:h.map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.symbol," ",e.direction]}),(0,a.jsxs)("div",{className:"text-sm text-gray-400",children:["Confidence: ",e.confidence,"/10 • ",e.status]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]},e._id))}):(0,a.jsx)("p",{className:"text-gray-400",children:"No predictions yet"})]})]})]})}):null}}},function(e){e.O(0,[449,133,749,422,744],function(){return e(e.s=3259)}),_N_E=e.O()}]);